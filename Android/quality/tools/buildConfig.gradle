gradle.allprojects {
    ext.isLocalTestCoverageEnabled = {
        def props = new Properties()
        def propertyFile = file("$rootDir${File.separatorChar}dev.properties")

        if (propertyFile.exists()) {
            propertyFile.withInputStream { props.load(it) }
        }

        return props
                .getProperty("testCoverageEnabled", "true")
                .toBoolean()
    }
}

gradle.projectsEvaluated {
    tasks.withType(JavaCompile) {
        options.compilerArgs << "-Xmaxerrs" << "1800"
    }
}